<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resume Builder - PDF Download</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%); padding: 20px; color: #333; line-height: 1.6; }
    .container { max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; gap: 25px; }
    .form-section { flex: 1; min-width: 300px; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
    .preview-section { flex: 1; min-width: 300px; display: flex; flex-direction: column; align-items: center; }
    h1 { text-align: center; margin: 20px 0; color: #2c3e50; font-size: 2.2rem; }
    h2 { color: #3498db; margin: 15px 0 10px; border-bottom: 2px solid #eee; padding-bottom: 8px; }
    label { display: block; margin: 12px 0 6px; font-weight: 600; color: #2c3e50; }
    input, textarea { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; }
    textarea { min-height: 100px; resize: vertical; }
    button { background: #3498db; color: white; border: none; padding: 14px 25px; font-size: 18px; border-radius: 8px; cursor: pointer; margin-top: 10px; width: 100%; transition: all 0.3s; font-weight: 600; }
    button:hover { background: #2980b9; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    button:active { transform: translateY(0); }
    #resume-preview { width: 210mm; min-height: 297mm; background: white; padding: 40px; box-shadow: 0 0 20px rgba(0,0,0,0.15); margin-top: 20px; position: relative; }
    .resume-title { font-size: 2.4rem; color: #2c3e50; margin-bottom: 8px; text-align: center; }
    .resume-subtitle { text-align: center; color: #3498db; margin-bottom: 25px; font-size: 1.3rem; }
    .section { margin: 20px 0; }
    .section-title { font-size: 1.5rem; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 5px; margin-bottom: 12px; }
    .contact-info { text-align: center; margin: 15px 0; font-size: 1.05rem; color: #555; }
    .experience-item, .education-item { margin-bottom: 15px; }
    .job-title, .degree { font-weight: bold; color: #2c3e50; }
    .company, .university { color: #3498db; }
    .date { color: #e74c3c; font-style: italic; }
    .skills { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }
    .skill-tag { background: #e3f2fd; padding: 4px 10px; border-radius: 15px; font-size: 0.9rem; }
    .loading { display: none; text-align: center; margin-top: 15px; color: #3498db; font-weight: 500; }
    .footer { text-align: center; margin-top: 25px; color: #7f8c8d; font-size: 0.95rem; }
    @media print { body { background: white; } .form-section, .footer { display: none; } #resume-preview { box-shadow: none; width: 100%; } }
    @media (max-width: 768px) { .container { flex-direction: column; } #resume-preview { width: 100%; } }
  </style>
</head>
<body>
  <h1>ЁЯУД рдЖрд╕рд╛рди рд░рд┐рдЬрд╝реНрдпреВрдореЗ рдмрд┐рд▓реНрдбрд░ (Resume Builder)</h1>
  
  <div class="container">
    <!-- Form Section -->
    <div class="form-section">
      <h2>ЁЯУЭ рдЕрдкрдирд╛ рдбреЗрдЯрд╛ рднрд░реЗрдВ</h2>
      
      <label for="name">рдкреВрд░рд╛ рдирд╛рдо (Full Name)</label>
      <input type="text" id="name" placeholder="рд░рд╛рд╣реБрд▓ рд╢рд░реНрдорд╛" oninput="updateResume()">
      
      <label for="title">рдкрджрдирд╛рдо (Job Title)</label>
      <input type="text" id="title" placeholder="рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЗрдВрдЬреАрдирд┐рдпрд░" oninput="updateResume()">
      
      <label for="email">рдИрдореЗрд▓ (Email)</label>
      <input type="email" id="email" placeholder="rahul@email.com" oninput="updateResume()">
      
      <label for="phone">рдлрд╝реЛрди (Phone)</label>
      <input type="tel" id="phone" placeholder="+91 9876543210" oninput="updateResume()">
      
      <label for="linkedin">LinkedIn (рд╡реИрдХрд▓реНрдкрд┐рдХ)</label>
      <input type="url" id="linkedin" placeholder="linkedin.com/in/rahulsharma" oninput="updateResume()">
      
      <label for="summary">рд╕рд╛рд░рд╛рдВрд╢ (Summary)</label>
      <textarea id="summary" placeholder="рдЕрдкрдиреЗ рдмрд╛рд░реЗ рдореЗрдВ 2-3 рд▓рд╛рдЗрдиреЗрдВ..." oninput="updateResume()"></textarea>
      
      <label for="experience">рдЕрдиреБрднрд╡ (Experience) - рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдирдИ рд▓рд╛рдЗрди рдореЗрдВ рд▓рд┐рдЦреЗрдВ</label>
      <textarea id="experience" placeholder="рдХрдВрдкрдиреА, рдкрдж, рддрд┐рдерд┐&#10;рдкреНрд░рдореБрдЦ рдЙрдкрд▓рдмреНрдзрд┐рдпрд╛рдБ" oninput="updateResume()"></textarea>
      
      <label for="education">рд╢рд┐рдХреНрд╖рд╛ (Education) - рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдирдИ рд▓рд╛рдЗрди рдореЗрдВ рд▓рд┐рдЦреЗрдВ</label>
      <textarea id="education" placeholder="рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдп, рдбрд┐рдЧреНрд░реА, рддрд┐рдерд┐&#10;рд╡рд┐рд╡рд░рдг" oninput="updateResume()"></textarea>
      
      <label for="skills">рдХреМрд╢рд▓ (Skills) - рдХреЙрдорд╛ рд╕реЗ рдЕрд▓рдЧ рдХрд░реЗрдВ (рдЬреИрд╕реЗ: Python, рдЯреАрдо рд▓реАрдбрд░рд╢рд┐рдк, рд╣рд┐рдВрджреА)</label>
      <input type="text" id="skills" placeholder="JavaScript, рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ, рд╕рдВрдЪрд╛рд░" oninput="updateResume()">
      
      <button onclick="downloadPDF()">ЁЯУе PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ</button>
      <div class="loading" id="loading">PDF рдмрди рд░рд╣рд╛ рд╣реИ... рдХреГрдкрдпрд╛ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ</div>
    </div>
    
    <!-- Preview Section -->
    <div class="preview-section">
      <h2>ЁЯСА рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди (Preview)</h2>
      <div id="resume-preview">
        <div class="resume-title" id="preview-name">рд░рд╛рд╣реБрд▓ рд╢рд░реНрдорд╛</div>
        <div class="resume-subtitle" id="preview-title">рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЗрдВрдЬреАрдирд┐рдпрд░</div>
        <div class="contact-info" id="preview-contact">
          ЁЯУз rahul@email.com | ЁЯУ▒ +91 9876543210 | ЁЯФЧ linkedin.com/in/rahulsharma
        </div>
        
        <div class="section">
          <div class="section-title">рд╕рд╛рд░рд╛рдВрд╢</div>
          <div id="preview-summary">рдкреНрд░рддрд┐рднрд╛рд╢рд╛рд▓реА рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЗрдВрдЬреАрдирд┐рдпрд░ рдЬрд┐рдиреНрд╣реЗрдВ рдЙрдЪреНрдЪ-рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓реЗ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдФрд░ рдЯреАрдо рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рдХрд╛рдо рдХрд░рдиреЗ рдореЗрдВ рдЕрдиреБрднрд╡ рд╣реИред рдирд╡реАрдирддрдо рддрдХрдиреАрдХреЛрдВ рдХреЗ рдкреНрд░рддрд┐ рдЙрддреНрд╕реБрдХред</div>
        </div>
        
        <div class="section">
          <div class="section-title">рдЕрдиреБрднрд╡</div>
          <div class="experience-item">
            <div class="job-title">рдЯреЗрдХ рд╕реЙрд▓реНрдпреВрд╢рдВрд╕ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдорд┐рдЯреЗрдб</div>
            <div class="company">рд╕реАрдирд┐рдпрд░ рдбреЗрд╡рд▓рдкрд░</div>
            <div class="date">рдЬрдирд╡рд░реА 2020 - рд╡рд░реНрддрдорд╛рди</div>
            <div>рдкреНрд░рдореБрдЦ рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдкрд░ рдХрд╛рдо рдХрд┐рдпрд╛, рдЯреАрдо рдХреЛ рдореЗрдВрдЯрд░ рдХрд┐рдпрд╛, рдФрд░ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ 30% рд╕реБрдзрд╛рд░ рдХрд┐рдпрд╛ред</div>
          </div>
        </div>
        
        <div class="section">
          <div class="section-title">рд╢рд┐рдХреНрд╖рд╛</div>
          <div class="education-item">
            <div class="degree">рдмреА.рдЯреЗрдХ рдЗрди рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд╛рдЗрдВрд╕</div>
            <div class="university">рджрд┐рд▓реНрд▓реА рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдп</div>
            <div class="date">2016 - 2020</div>
          </div>
        </div>
        
        <div class="section">
          <div class="section-title">рдХреМрд╢рд▓</div>
          <div class="skills" id="preview-skills">
            <span class="skill-tag">JavaScript</span>
            <span class="skill-tag">React</span>
            <span class="skill-tag">Python</span>
            <span class="skill-tag">рдЯреАрдо рд▓реАрдбрд░рд╢рд┐рдк</span>
            <span class="skill-tag">рд╣рд┐рдВрджреА</span>
            <span class="skill-tag">рдЕрдВрдЧреНрд░реЗрдЬрд╝реА</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="footer">
    ЁЯТб рдЯрд┐рдк: рдлреЙрд░реНрдо рднрд░рддреЗ рд╣реА рд░рд┐рдЬрд╝реНрдпреВрдореЗ рдЕрдкрдбреЗрдЯ рд╣реЛрдЧрд╛ред "PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ" рдмрдЯрди рджрдмрд╛рдХрд░ PDF рд╕реЗрд╡ рдХрд░реЗрдВред<br>
    тЬи рдХреЛрдИ рдбреЗрдЯрд╛ рд╕рд░реНрд╡рд░ рдкрд░ рд╕реЗрд╡ рдирд╣реАрдВ рд╣реЛрддрд╛ тАФ рд╕рднреА рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдЖрдкрдХреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╣реЛрддреА рд╣реИ (рдкреВрд░реНрдгрддрдГ рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдирд┐рдЬреА)ред
  </div>

  <script>
    // Initialize jsPDF from UMD bundle
    const { jsPDF } = window.jspdf;
    
    // Update resume preview in real-time
    function updateResume() {
      document.getElementById('preview-name').textContent = document.getElementById('name').value || 'рд░рд╛рд╣реБрд▓ рд╢рд░реНрдорд╛';
      document.getElementById('preview-title').textContent = document.getElementById('title').value || 'рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЗрдВрдЬреАрдирд┐рдпрд░';
      
      const email = document.getElementById('email').value || 'rahul@email.com';
      const phone = document.getElementById('phone').value || '+91 9876543210';
      const linkedin = document.getElementById('linkedin').value ? ` | ЁЯФЧ ${document.getElementById('linkedin').value}` : '';
      document.getElementById('preview-contact').innerHTML = `ЁЯУз ${email} | ЁЯУ▒ ${phone}${linkedin}`;
      
      document.getElementById('preview-summary').textContent = document.getElementById('summary').value || 
        'рдкреНрд░рддрд┐рднрд╛рд╢рд╛рд▓реА рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЗрдВрдЬреАрдирд┐рдпрд░ рдЬрд┐рдиреНрд╣реЗрдВ рдЙрдЪреНрдЪ-рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓реЗ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдФрд░ рдЯреАрдо рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рдХрд╛рдо рдХрд░рдиреЗ рдореЗрдВ рдЕрдиреБрднрд╡ рд╣реИред рдирд╡реАрдирддрдо рддрдХрдиреАрдХреЛрдВ рдХреЗ рдкреНрд░рддрд┐ рдЙрддреНрд╕реБрдХред';
      
      // Process Experience
      const expText = document.getElementById('experience').value;
      const expPreview = document.querySelector('.section-title:contains("рдЕрдиреБрднрд╡") + div');
      if (expPreview) {
        if (expText) {
          const lines = expText.split('\n').filter(line => line.trim());
          let html = '';
          lines.forEach(line => {
            if (line.includes(',')) {
              const parts = line.split(',');
              html += `<div class="experience-item">
                <div class="job-title">${parts[0]?.trim() || ''}</div>
                <div class="company">${parts[1]?.trim() || ''}</div>
                <div class="date">${parts[2]?.trim() || ''}</div>
                <div>${parts.slice(3).join(',').trim() || 'рд╡рд┐рд╡рд░рдг'}</div>
              </div>`;
            } else {
              html += `<div class="experience-item">${line}</div>`;
            }
          });
          expPreview.innerHTML = html || 'рдЕрдиреБрднрд╡ рджрд░реНрдЬ рдХрд░реЗрдВ';
        } else {
          expPreview.innerHTML = `<div class="experience-item">
            <div class="job-title">рдЯреЗрдХ рд╕реЙрд▓реНрдпреВрд╢рдВрд╕ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рд▓рд┐рдорд┐рдЯреЗрдб</div>
            <div class="company">рд╕реАрдирд┐рдпрд░ рдбреЗрд╡рд▓рдкрд░</div>
            <div class="date">рдЬрдирд╡рд░реА 2020 - рд╡рд░реНрддрдорд╛рди</div>
            <div>рдкреНрд░рдореБрдЦ рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдкрд░ рдХрд╛рдо рдХрд┐рдпрд╛, рдЯреАрдо рдХреЛ рдореЗрдВрдЯрд░ рдХрд┐рдпрд╛, рдФрд░ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ 30% рд╕реБрдзрд╛рд░ рдХрд┐рдпрд╛ред</div>
          </div>`;
        }
      }
      
      // Process Education
      const eduText = document.getElementById('education').value;
      const eduPreview = document.querySelector('.section-title:contains("рд╢рд┐рдХреНрд╖рд╛") + div');
      if (eduPreview) {
        if (eduText) {
          const lines = eduText.split('\n').filter(line => line.trim());
          let html = '';
          lines.forEach(line => {
            if (line.includes(',')) {
              const parts = line.split(',');
              html += `<div class="education-item">
                <div class="degree">${parts[0]?.trim() || ''}</div>
                <div class="university">${parts[1]?.trim() || ''}</div>
                <div class="date">${parts[2]?.trim() || ''}</div>
                <div>${parts.slice(3).join(',').trim() || ''}</div>
              </div>`;
            } else {
              html += `<div class="education-item">${line}</div>`;
            }
          });
          eduPreview.innerHTML = html || 'рд╢рд┐рдХреНрд╖рд╛ рджрд░реНрдЬ рдХрд░реЗрдВ';
        } else {
          eduPreview.innerHTML = `<div class="education-item">
            <div class="degree">рдмреА.рдЯреЗрдХ рдЗрди рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд╛рдЗрдВрд╕</div>
            <div class="university">рджрд┐рд▓реНрд▓реА рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдп</div>
            <div class="date">2016 - 2020</div>
          </div>`;
        }
      }
      
      // Process Skills
      const skillsText = document.getElementById('skills').value || 'JavaScript, React, Python, рдЯреАрдо рд▓реАрдбрд░рд╢рд┐рдк, рд╣рд┐рдВрджреА, рдЕрдВрдЧреНрд░реЗрдЬрд╝реА';
      const skillsArr = skillsText.split(',').map(s => s.trim()).filter(s => s);
      const skillsHTML = skillsArr.map(skill => `<span class="skill-tag">${skill}</span>`).join('');
      document.getElementById('preview-skills').innerHTML = skillsHTML || '<span class="skill-tag">рдХреМрд╢рд▓ рджрд░реНрдЬ рдХрд░реЗрдВ</span>';
    }
    
    // Fix for :contains selector (not standard)
    if (!CSS.supports('selector(:contains("a"))')) {
      // Fallback: use class-based selection for education/experience sections
      document.querySelectorAll('.section').forEach(section => {
        const title = section.querySelector('.section-title');
        if (title?.textContent.includes('рдЕрдиреБрднрд╡')) section.id = 'exp-section';
        if (title?.textContent.includes('рд╢рд┐рдХреНрд╖рд╛')) section.id = 'edu-section';
      });
    }
    
    // Download PDF function
    function downloadPDF() {
      const loading = document.getElementById('loading');
      loading.style.display = 'block';
      
      // Temporarily adjust preview for better PDF capture
      const resume = document.getElementById('resume-preview');
      const originalWidth = resume.style.width;
      resume.style.width = '210mm';
      
      html2canvas(resume, {
        scale: 2,
        useCORS: true,
        logging: false,
        onclone: (document) => {
          document.getElementById('resume-preview').style.width = '210mm';
        }
      }).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jsPDF({
          orientation: 'portrait',
          unit: 'mm',
          format: 'a4'
        });
        
        const imgWidth = 210; // A4 width in mm
        const pageHeight = 297; // A4 height in mm
        const imgHeight = canvas.height * imgWidth / canvas.width;
        let heightLeft = imgHeight;
        
        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
        heightLeft -= pageHeight;
        
        let position = heightLeft - imgHeight + 15;
        while (heightLeft >= 0) {
          pdf.addPage();
          pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
          heightLeft -= pageHeight;
          position -= imgHeight;
        }
        
        // Reset preview width
        resume.style.width = originalWidth;
        loading.style.display = 'none';
        
        // Save PDF with Hindi-friendly filename (browser handles encoding)
        pdf.save(`Resume_${new Date().getTime()}.pdf`);
        
        // Show success message
        alert('тЬЕ рд░рд┐рдЬрд╝реНрдпреВрдореЗ PDF рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдбрд╛рдЙрдирд▓реЛрдб рд╣реЛ рдЧрдпрд╛!\n(рдлрд╝рд╛рдЗрд▓ рдирд╛рдо: Resume_*.pdf)');
      }).catch(error => {
        console.error('PDF рдмрдирд╛рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐:', error);
        alert('тЪая╕П PDF рдмрдирд╛рдиреЗ рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рдЖрдИред рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред');
        loading.style.display = 'none';
        resume.style.width = originalWidth;
      });
    }
    
    // Initialize with default preview
    window.onload = updateResume;
    
    // Add helper for :contains selector fallback
    document.querySelectorAll('.section-title').forEach(el => {
      if (el.textContent.includes('рдЕрдиреБрднрд╡')) el.parentElement.id = 'exp-section';
      if (el.textContent.includes('рд╢рд┐рдХреНрд╖рд╛')) el.parentElement.id = 'edu-section';
    });
  </script>
</body>
</html>
